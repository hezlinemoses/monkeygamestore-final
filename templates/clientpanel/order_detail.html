{% extends 'clientpanel/account_base.html' %}
{% load static %}
{% block dynamic_css %} <link rel="stylesheet" href="{% static 'styles/admin_orderdetail.css' %}"> {% endblock dynamic_css %}



{% block dynamic %}
{% if messages %}

{% for message in messages %}
    
      <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
      <script>
        Swal.fire({
          icon: 'success',
          
          text: "{{message}}",
        })
      </script>
    
{% endfor %}
{% endif %}

<div class="order-container p-3">
    <h4 class='fw-bold mb-4'>Order  <u>#{{order.id}}</u></h3>
    <div class="row ms-2">
        <div class="col-11 col-md-6 col-xl-4 col-lg-4 mb-3">
            <div class="card" >
                <ul class="list-group list-group-flush ">
                  {% comment %} <li class="list-group-item bg-bg d-flex justify-content-between"><div>User:</div> <div>{{order.user.username}}</div> </li> {% endcomment %}
                  <li class="list-group-item bg-bg d-flex justify-content-between"><div>Items:</div> <div>{{order.itemcount}}</div> </li>
                  <li class="list-group-item bg-bg d-flex justify-content-between"><div>Payment Method:</div> <div>{{order.payment_method}}</div> </li>
                  {% if order.coupon_code %}
                  <li class="list-group-item bg-bg d-flex justify-content-between"><div>Coupon Apllied: </div> <div>{{order.coupon_code}}</div> </li>
                  <li class="list-group-item bg-bg d-flex justify-content-between"><div>Total: </div> <div>₹{{order.total_defore_coupon}}</div> </li>
                  <li class="list-group-item bg-bg d-flex justify-content-between"><div>Coupon Discount: </div> <div>₹{{order.coupon_discount}}</div> </li>
                  {% endif %}
                  <li class="list-group-item bg-bg d-flex justify-content-between"><div>Sub-total:</div> <div>₹{{order.total}}</div> </li>
                </ul>
              </div>
        </div>


        <div class="col-11 col-md-6 col-xl-4 col-lg-4 mb-3">
          <div class="card" >
              <ul class="list-group list-group-flush ">
                <li class="list-group-item bg-bg d-flex flex-column justify-content-between"><div class='fw-bold mb-3'>Billing Address:</div>
                  <div class="ms-5 mb-1">{{order.billing_address.first_name}} {{order.billing_address.last_name}},</div>
                   <div class="ms-5 mb-1">{{order.billing_address.line_1}},</div>
                   {% if order.billing_address.line_2 %}
                   <div class="ms-5 mb-1">{{order.billing_address.line_2}},</div>
                   {% endif %}
                   <div class="ms-5 mb-1">{{order.billing_address.district}},</div>
                   <div class="ms-5 mb-1">{{order.billing_address.state}},</div>
                   <div class="ms-5 fw-bold mb-1">{{order.billing_address.pincode}}</div>

                </li>
              </ul>
            </div>
        </div>
       
    </div>

   

    <div class="row mt-3 ms-1">
        <div class="col-xl-8 col-lg-10 col-md-12 col-12">
            <h5 class='fw-bold'>Items in this order:</h5>
            {% for item in order.items.all %}
              
            <div class="card  mb-4 dark-light cartitem">
              <div class="card-body p-3 dark-light">
                <div class="row d-flex justify-content-between align-items-center">
                  <div class="col-md-3 col-lg-3 col-xl-2 mb-3">
                    <img
                      src="/media/{{item.game.thumbnail}}"
                      class="img-fluid rounded-3" >
                  </div>
                  <div class="col-md-4 col-lg-4 col-xl-4 mb-3">
                    <p class="lead mb-2 capital" style="font-weight:600;">{{item.title}}</p>
                    <p class='d-flex flex-column'><div class='mb-2'><span class="text-muted ">Product Keys: </span>{{item.quantity}}</div>
                      {% comment %} <div class='platform'><i class="fa-brands fa-windows text-secondary"></i></div></p> {% endcomment %}
                  </div>
                  
                  
                  <div class="col-md-3 col-lg-2 col-xl-2 mb-2">
                    <h5 class="mb-0" style="font-weight:600;">₹{{item.item_total}}</h5>
                    
                  </div>
                  
                </div>
              </div>
            </div>
            {% endfor %}
        </div>
    </div>

</div>


{% endblock dynamic %}
